using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using System;
using System.Linq;
public class blockbuilder : MonoBehaviour
{  
  private bool onGround;
  public bool building = false;

	float[,] array2D = new float[,] {{-6.25f, -3f}, {-6.25f, -2.75f}, {-6.25f, -2.5f}, {-6.25f, -2.25f}, {-6.25f, -2f}, {-6.25f, -1.75f}, {-6.25f, -1.5f}, {-6.25f, -1.25f}, {-6.25f, -1f}, {-6.25f, -0.75f}, {-6.25f, -0.5f}, {-6.25f, -0.25f}, {-6.25f, 0f}, {-6.25f, 0.25f}, {-6.25f, 0.5f}, {-6.25f, 0.75f}, {-6.25f, 1f}, {-6.25f, 1.25f}, {-6.25f, 1.5f}, {-6.25f, 1.75f}, {-6.25f, 2f}, {-6.25f, 2.25f}, {-6.25f, 2.5f}, {-6.25f, 2.75f}, {-6.25f, 3f}, {-5.75f, -3f}, {-5.75f, -2.75f}, {-5.75f, -2.5f}, {-5.75f, -2.25f}, {-5.75f, -2f}, {-5.75f, -1.75f}, {-5.75f, -1.5f}, {-5.75f, -1.25f}, {-5.75f, -1f}, {-5.75f, -0.75f}, {-5.75f, -0.5f}, {-5.75f, -0.25f}, {-5.75f, 0f}, {-5.75f, 0.25f}, {-5.75f, 0.5f}, {-5.75f, 0.75f}, {-5.75f, 1f}, {-5.75f, 1.25f}, {-5.75f, 1.5f}, {-5.75f, 1.75f}, {-5.75f, 2f}, {-5.75f, 2.25f}, {-5.75f, 2.5f}, {-5.75f, 2.75f}, {-5.75f, 3f}, {-5.25f, -3f}, {-5.25f, -2.75f}, {-5.25f, -2.5f}, {-5.25f, -2.25f}, {-5.25f, -2f}, {-5.25f, -1.75f}, {-5.25f, -1.5f}, {-5.25f, -1.25f}, {-5.25f, -1f}, {-5.25f, -0.75f}, {-5.25f, -0.5f}, {-5.25f, -0.25f}, {-5.25f, 0f}, {-5.25f, 0.25f}, {-5.25f, 0.5f}, {-5.25f, 0.75f}, {-5.25f, 1f}, {-5.25f, 1.25f}, {-5.25f, 1.5f}, {-5.25f, 1.75f}, {-5.25f, 2f}, {-5.25f, 2.25f}, {-5.25f, 2.5f}, {-5.25f, 2.75f}, {-5.25f, 3f}, {-4.75f, -3f}, {-4.75f, -2.75f}, {-4.75f, -2.5f}, {-4.75f, -2.25f}, {-4.75f, -2f}, {-4.75f, -1.75f}, {-4.75f, -1.5f}, {-4.75f, -1.25f}, {-4.75f, -1f}, {-4.75f, -0.75f}, {-4.75f, -0.5f}, {-4.75f, -0.25f}, {-4.75f, 0f}, {-4.75f, 0.25f}, {-4.75f, 0.5f}, {-4.75f, 0.75f}, {-4.75f, 1f}, {-4.75f, 1.25f}, {-4.75f, 1.5f}, {-4.75f, 1.75f}, {-4.75f, 2f}, {-4.75f, 2.25f}, {-4.75f, 2.5f}, {-4.75f, 2.75f}, {-4.75f, 3f}, {-4.25f, -3f}, {-4.25f, -2.75f}, {-4.25f, -2.5f}, {-4.25f, -2.25f}, {-4.25f, -2f}, {-4.25f, -1.75f}, {-4.25f, -1.5f}, {-4.25f, -1.25f}, {-4.25f, -1f}, {-4.25f, -0.75f}, {-4.25f, -0.5f}, {-4.25f, -0.25f}, {-4.25f, 0f}, {-4.25f, 0.25f}, {-4.25f, 0.5f}, {-4.25f, 0.75f}, {-4.25f, 1f}, {-4.25f, 1.25f}, {-4.25f, 1.5f}, {-4.25f, 1.75f}, {-4.25f, 2f}, {-4.25f, 2.25f}, {-4.25f, 2.5f}, {-4.25f, 2.75f}, {-4.25f, 3f}, {-3.75f, -3f}, {-3.75f, -2.75f}, {-3.75f, -2.5f}, {-3.75f, -2.25f}, {-3.75f, -2f}, {-3.75f, -1.75f}, {-3.75f, -1.5f}, {-3.75f, -1.25f}, {-3.75f, -1f}, {-3.75f, -0.75f}, {-3.75f, -0.5f}, {-3.75f, -0.25f}, {-3.75f, 0f}, {-3.75f, 0.25f}, {-3.75f, 0.5f}, {-3.75f, 0.75f}, {-3.75f, 1f}, {-3.75f, 1.25f}, {-3.75f, 1.5f}, {-3.75f, 1.75f}, {-3.75f, 2f}, {-3.75f, 2.25f}, {-3.75f, 2.5f}, {-3.75f, 2.75f}, {-3.75f, 3f}, {-3.25f, -3f}, {-3.25f, -2.75f}, {-3.25f, -2.5f}, {-3.25f, -2.25f}, {-3.25f, -2f}, {-3.25f, -1.75f}, {-3.25f, -1.5f}, {-3.25f, -1.25f}, {-3.25f, -1f}, {-3.25f, -0.75f}, {-3.25f, -0.5f}, {-3.25f, -0.25f}, {-3.25f, 0f}, {-3.25f, 0.25f}, {-3.25f, 0.5f}, {-3.25f, 0.75f}, {-3.25f, 1f}, {-3.25f, 1.25f}, {-3.25f, 1.5f}, {-3.25f, 1.75f}, {-3.25f, 2f}, {-3.25f, 2.25f}, {-3.25f, 2.5f}, {-3.25f, 2.75f}, {-3.25f, 3f}, {-2.75f, -3f}, {-2.75f, -2.75f}, {-2.75f, -2.5f}, {-2.75f, -2.25f}, {-2.75f, -2f}, {-2.75f, -1.75f}, {-2.75f, -1.5f}, {-2.75f, -1.25f}, {-2.75f, -1f}, {-2.75f, -0.75f}, {-2.75f, -0.5f}, {-2.75f, -0.25f}, {-2.75f, 0f}, {-2.75f, 0.25f}, {-2.75f, 0.5f}, {-2.75f, 0.75f}, {-2.75f, 1f}, {-2.75f, 1.25f}, {-2.75f, 1.5f}, {-2.75f, 1.75f}, {-2.75f, 2f}, {-2.75f, 2.25f}, {-2.75f, 2.5f}, {-2.75f, 2.75f}, {-2.75f, 3f}, {-2.25f, -3f}, {-2.25f, -2.75f}, {-2.25f, -2.5f}, {-2.25f, -2.25f}, {-2.25f, -2f}, {-2.25f, -1.75f}, {-2.25f, -1.5f}, {-2.25f, -1.25f}, {-2.25f, -1f}, {-2.25f, -0.75f}, {-2.25f, -0.5f}, {-2.25f, -0.25f}, {-2.25f, 0f}, {-2.25f, 0.25f}, {-2.25f, 0.5f}, {-2.25f, 0.75f}, {-2.25f, 1f}, {-2.25f, 1.25f}, {-2.25f, 1.5f}, {-2.25f, 1.75f}, {-2.25f, 2f}, {-2.25f, 2.25f}, {-2.25f, 2.5f}, {-2.25f, 2.75f}, {-2.25f, 3f}, {-1.75f, -3f}, {-1.75f, -2.75f}, {-1.75f, -2.5f}, {-1.75f, -2.25f}, {-1.75f, -2f}, {-1.75f, -1.75f}, {-1.75f, -1.5f}, {-1.75f, -1.25f}, {-1.75f, -1f}, {-1.75f, -0.75f}, {-1.75f, -0.5f}, {-1.75f, -0.25f}, {-1.75f, 0f}, {-1.75f, 0.25f}, {-1.75f, 0.5f}, {-1.75f, 0.75f}, {-1.75f, 1f}, {-1.75f, 1.25f}, {-1.75f, 1.5f}, {-1.75f, 1.75f}, {-1.75f, 2f}, {-1.75f, 2.25f}, {-1.75f, 2.5f}, {-1.75f, 2.75f}, {-1.75f, 3f}, {-1.25f, -3f}, {-1.25f, -2.75f}, {-1.25f, -2.5f}, {-1.25f, -2.25f}, {-1.25f, -2f}, {-1.25f, -1.75f}, {-1.25f, -1.5f}, {-1.25f, -1.25f}, {-1.25f, -1f}, {-1.25f, -0.75f}, {-1.25f, -0.5f}, {-1.25f, -0.25f}, {-1.25f, 0f}, {-1.25f, 0.25f}, {-1.25f, 0.5f}, {-1.25f, 0.75f}, {-1.25f, 1f}, {-1.25f, 1.25f}, {-1.25f, 1.5f}, {-1.25f, 1.75f}, {-1.25f, 2f}, {-1.25f, 2.25f}, {-1.25f, 2.5f}, {-1.25f, 2.75f}, {-1.25f, 3f}, {-0.75f, -3f}, {-0.75f, -2.75f}, {-0.75f, -2.5f}, {-0.75f, -2.25f}, {-0.75f, -2f}, {-0.75f, -1.75f}, {-0.75f, -1.5f}, {-0.75f, -1.25f}, {-0.75f, -1f}, {-0.75f, -0.75f}, {-0.75f, -0.5f}, {-0.75f, -0.25f}, {-0.75f, 0f}, {-0.75f, 0.25f}, {-0.75f, 0.5f}, {-0.75f, 0.75f}, {-0.75f, 1f}, {-0.75f, 1.25f}, {-0.75f, 1.5f}, {-0.75f, 1.75f}, {-0.75f, 2f}, {-0.75f, 2.25f}, {-0.75f, 2.5f}, {-0.75f, 2.75f}, {-0.75f, 3f}, {-0.25f, -3f}, {-0.25f, -2.75f}, {-0.25f, -2.5f}, {-0.25f, -2.25f}, {-0.25f, -2f}, {-0.25f, -1.75f}, {-0.25f, -1.5f}, {-0.25f, -1.25f}, {-0.25f, -1f}, {-0.25f, -0.75f}, {-0.25f, -0.5f}, {-0.25f, -0.25f}, {-0.25f, 0f}, {-0.25f, 0.25f}, {-0.25f, 0.5f}, {-0.25f, 0.75f}, {-0.25f, 1f}, {-0.25f, 1.25f}, {-0.25f, 1.5f}, {-0.25f, 1.75f}, {-0.25f, 2f}, {-0.25f, 2.25f}, {-0.25f, 2.5f}, {-0.25f, 2.75f}, {-0.25f, 3f}, {0.25f, -3f}, {0.25f, -2.75f}, {0.25f, -2.5f}, {0.25f, -2.25f}, {0.25f, -2f}, {0.25f, -1.75f}, {0.25f, -1.5f}, {0.25f, -1.25f}, {0.25f, -1f}, {0.25f, -0.75f}, {0.25f, -0.5f}, {0.25f, -0.25f}, {0.25f, 0f}, {0.25f, 0.25f}, {0.25f, 0.5f}, {0.25f, 0.75f}, {0.25f, 1f}, {0.25f, 1.25f}, {0.25f, 1.5f}, {0.25f, 1.75f}, {0.25f, 2f}, {0.25f, 2.25f}, {0.25f, 2.5f}, {0.25f, 2.75f}, {0.25f, 3f}, {0.75f, -3f}, {0.75f, -2.75f}, {0.75f, -2.5f}, {0.75f, -2.25f}, {0.75f, -2f}, {0.75f, -1.75f}, {0.75f, -1.5f}, {0.75f, -1.25f}, {0.75f, -1f}, {0.75f, -0.75f}, {0.75f, -0.5f}, {0.75f, -0.25f}, {0.75f, 0f}, {0.75f, 0.25f}, {0.75f, 0.5f}, {0.75f, 0.75f}, {0.75f, 1f}, {0.75f, 1.25f}, {0.75f, 1.5f}, {0.75f, 1.75f}, {0.75f, 2f}, {0.75f, 2.25f}, {0.75f, 2.5f}, {0.75f, 2.75f}, {0.75f, 3f}, {1.25f, -3f}, {1.25f, -2.75f}, {1.25f, -2.5f}, {1.25f, -2.25f}, {1.25f, -2f}, {1.25f, -1.75f}, {1.25f, -1.5f}, {1.25f, -1.25f}, {1.25f, -1f}, {1.25f, -0.75f}, {1.25f, -0.5f}, {1.25f, -0.25f}, {1.25f, 0f}, {1.25f, 0.25f}, {1.25f, 0.5f}, {1.25f, 0.75f}, {1.25f, 1f}, {1.25f, 1.25f}, {1.25f, 1.5f}, {1.25f, 1.75f}, {1.25f, 2f}, {1.25f, 2.25f}, {1.25f, 2.5f}, {1.25f, 2.75f}, {1.25f, 3f}, {1.75f, -3f}, {1.75f, -2.75f}, {1.75f, -2.5f}, {1.75f, -2.25f}, {1.75f, -2f}, {1.75f, -1.75f}, {1.75f, -1.5f}, {1.75f, -1.25f}, {1.75f, -1f}, {1.75f, -0.75f}, {1.75f, -0.5f}, {1.75f, -0.25f}, {1.75f, 0f}, {1.75f, 0.25f}, {1.75f, 0.5f}, {1.75f, 0.75f}, {1.75f, 1f}, {1.75f, 1.25f}, {1.75f, 1.5f}, {1.75f, 1.75f}, {1.75f, 2f}, {1.75f, 2.25f}, {1.75f, 2.5f}, {1.75f, 2.75f}, {1.75f, 3f}, {2.25f, -3f}, {2.25f, -2.75f}, {2.25f, -2.5f}, {2.25f, -2.25f}, {2.25f, -2f}, {2.25f, -1.75f}, {2.25f, -1.5f}, {2.25f, -1.25f}, {2.25f, -1f}, {2.25f, -0.75f}, {2.25f, -0.5f}, {2.25f, -0.25f}, {2.25f, 0f}, {2.25f, 0.25f}, {2.25f, 0.5f}, {2.25f, 0.75f}, {2.25f, 1f}, {2.25f, 1.25f}, {2.25f, 1.5f}, {2.25f, 1.75f}, {2.25f, 2f}, {2.25f, 2.25f}, {2.25f, 2.5f}, {2.25f, 2.75f}, {2.25f, 3f}, {2.75f, -3f}, {2.75f, -2.75f}, {2.75f, -2.5f}, {2.75f, -2.25f}, {2.75f, -2f}, {2.75f, -1.75f}, {2.75f, -1.5f}, {2.75f, -1.25f}, {2.75f, -1f}, {2.75f, -0.75f}, {2.75f, -0.5f}, {2.75f, -0.25f}, {2.75f, 0f}, {2.75f, 0.25f}, {2.75f, 0.5f}, {2.75f, 0.75f}, {2.75f, 1f}, {2.75f, 1.25f}, {2.75f, 1.5f}, {2.75f, 1.75f}, {2.75f, 2f}, {2.75f, 2.25f}, {2.75f, 2.5f}, {2.75f, 2.75f}, {2.75f, 3f}, {3.25f, -3f}, {3.25f, -2.75f}, {3.25f, -2.5f}, {3.25f, -2.25f}, {3.25f, -2f}, {3.25f, -1.75f}, {3.25f, -1.5f}, {3.25f, -1.25f}, {3.25f, -1f}, {3.25f, -0.75f}, {3.25f, -0.5f}, {3.25f, -0.25f}, {3.25f, 0f}, {3.25f, 0.25f}, {3.25f, 0.5f}, {3.25f, 0.75f}, {3.25f, 1f}, {3.25f, 1.25f}, {3.25f, 1.5f}, {3.25f, 1.75f}, {3.25f, 2f}, {3.25f, 2.25f}, {3.25f, 2.5f}, {3.25f, 2.75f}, {3.25f, 3f}, {3.75f, -3f}, {3.75f, -2.75f}, {3.75f, -2.5f}, {3.75f, -2.25f}, {3.75f, -2f}, {3.75f, -1.75f}, {3.75f, -1.5f}, {3.75f, -1.25f}, {3.75f, -1f}, {3.75f, -0.75f}, {3.75f, -0.5f}, {3.75f, -0.25f}, {3.75f, 0f}, {3.75f, 0.25f}, {3.75f, 0.5f}, {3.75f, 0.75f}, {3.75f, 1f}, {3.75f, 1.25f}, {3.75f, 1.5f}, {3.75f, 1.75f}, {3.75f, 2f}, {3.75f, 2.25f}, {3.75f, 2.5f}, {3.75f, 2.75f}, {3.75f, 3f}, {4.25f, -3f}, {4.25f, -2.75f}, {4.25f, -2.5f}, {4.25f, -2.25f}, {4.25f, -2f}, {4.25f, -1.75f}, {4.25f, -1.5f}, {4.25f, -1.25f}, {4.25f, -1f}, {4.25f, -0.75f}, {4.25f, -0.5f}, {4.25f, -0.25f}, {4.25f, 0f}, {4.25f, 0.25f}, {4.25f, 0.5f}, {4.25f, 0.75f}, {4.25f, 1f}, {4.25f, 1.25f}, {4.25f, 1.5f}, {4.25f, 1.75f}, {4.25f, 2f}, {4.25f, 2.25f}, {4.25f, 2.5f}, {4.25f, 2.75f}, {4.25f, 3f}, {4.75f, -3f}, {4.75f, -2.75f}, {4.75f, -2.5f}, {4.75f, -2.25f}, {4.75f, -2f}, {4.75f, -1.75f}, {4.75f, -1.5f}, {4.75f, -1.25f}, {4.75f, -1f}, {4.75f, -0.75f}, {4.75f, -0.5f}, {4.75f, -0.25f}, {4.75f, 0f}, {4.75f, 0.25f}, {4.75f, 0.5f}, {4.75f, 0.75f}, {4.75f, 1f}, {4.75f, 1.25f}, {4.75f, 1.5f}, {4.75f, 1.75f}, {4.75f, 2f}, {4.75f, 2.25f}, {4.75f, 2.5f}, {4.75f, 2.75f}, {4.75f, 3f}, {5.25f, -3f}, {5.25f, -2.75f}, {5.25f, -2.5f}, {5.25f, -2.25f}, {5.25f, -2f}, {5.25f, -1.75f}, {5.25f, -1.5f}, {5.25f, -1.25f}, {5.25f, -1f}, {5.25f, -0.75f}, {5.25f, -0.5f}, {5.25f, -0.25f}, {5.25f, 0f}, {5.25f, 0.25f}, {5.25f, 0.5f}, {5.25f, 0.75f}, {5.25f, 1f}, {5.25f, 1.25f}, {5.25f, 1.5f}, {5.25f, 1.75f}, {5.25f, 2f}, {5.25f, 2.25f}, {5.25f, 2.5f}, {5.25f, 2.75f}, {5.25f, 3f}, {5.75f, -3f}, {5.75f, -2.75f}, {5.75f, -2.5f}, {5.75f, -2.25f}, {5.75f, -2f}, {5.75f, -1.75f}, {5.75f, -1.5f}, {5.75f, -1.25f}, {5.75f, -1f}, {5.75f, -0.75f}, {5.75f, -0.5f}, {5.75f, -0.25f}, {5.75f, 0f}, {5.75f, 0.25f}, {5.75f, 0.5f}, {5.75f, 0.75f}, {5.75f, 1f}, {5.75f, 1.25f}, {5.75f, 1.5f}, {5.75f, 1.75f}, {5.75f, 2f}, {5.75f, 2.25f}, {5.75f, 2.5f}, {5.75f, 2.75f}, {5.75f, 3f}};
  float x = 5.0f;
	float y = 8.0f;

	Vector2 endPosition;
	Vector2 buildingPosition;
	Vector2 saved;

  public GameObject block;
  void Awake(){
    buildingPosition = Camera.main.ScreenToWorldPoint(Input.mousePosition);
    saved = buildingPosition;
    move();
  }
  void Update()
  {
    buildingPosition = Camera.main.ScreenToWorldPoint(Input.mousePosition);
    if (buildingPosition != saved){
     saved = buildingPosition;
     move();
    }
    transform.position = endPosition;
    if (Input.GetMouseButtonDown(0)){
      Instantiate(block, endPosition, Quaternion.identity);
    }

    }
    static float distance(float x1, float y1, float x2, float y2){
   	float result = 0.0f;
       result = Mathf.Sqrt(((x2 - x1) * (x2 - x1)) + ((y2 - y1) * (y2 - y1))) ; 
       return result; 
   }

   void move()
   {
    
   	Vector2 buildingPosition = Camera.main.ScreenToWorldPoint(Input.mousePosition);
   	x = buildingPosition.x;
   	y = buildingPosition.y;
   	float min = 10000.0f;
   	for( int i = 0; i < 625; i++)
   	{
   		float d= distance(x,y, array2D[i,0], array2D[i,1]); 
   		if(d < min){
        min = d;  
        if (building == false){
          
            endPosition = new Vector2(array2D[i,0], array2D[i,1]);
          
        }else {
          
            endPosition = new Vector2(array2D[i,0], array2D[i,1]);
          
        }
    }
  }

 }
  void OnCollisionEnter2D(Collision2D col)
    {
      
        onGround = true;
        Debug.Log(onGround);
      
    } 
    void OnCollisionExit2D(Collision2D col)
    {
      
      
        onGround = false;
        
      
    }
}
